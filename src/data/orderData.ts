import { Order, Customer, Ticket, OrderStatus, PaymentStatus } from '@/types/train';
import { initialTrainData } from './trainData';

// Helper to generate mock customers
const mockCustomers: Customer[] = [
    {
        id: 'cust-1',
        fullName: 'Nguyễn Văn An',
        email: 'nguyenvanan@email.com',
        phone: '0901234567',
        idNumber: '001234567890',
    },
    {
        id: 'cust-2',
        fullName: 'Trần Thị Bình',
        email: 'tranthibinh@email.com',
        phone: '0912345678',
        idNumber: '002345678901',
    },
    {
        id: 'cust-3',
        fullName: 'Lê Văn Công',
        email: 'levancong@email.com',
        phone: '0923456789',
        idNumber: '003456789012',
    },
    {
        id: 'cust-4',
        fullName: 'Phạm Thị Dung',
        email: 'phamthidung@email.com',
        phone: '0934567890',
        idNumber: '004567890123',
    },
    {
        id: 'cust-5',
        fullName: 'Hoàng Văn Em',
        email: 'hoangvanem@email.com',
        phone: '0945678901',
        idNumber: '005678901234',
    },
];

// Helper to generate tickets for an order
function generateTickets(orderId: string, trainId: string, count: number): Ticket[] {
    const tickets: Ticket[] = [];
    const train = initialTrainData.find(t => t.id === trainId);

    if (!train || train.carriages.length === 0) return tickets;

    const basePrice = train.basePrice;
    const seatNumbers = ['1A', '1B', '2A', '2B', '3A', '3B', '4A', '4B'];

    for (let i = 0; i < count; i++) {
        tickets.push({
            id: `ticket-${orderId}-${i + 1}`,
            orderId,
            passengerName: i === 0 ? mockCustomers[i % mockCustomers.length].fullName : `Hành khách ${i + 1}`,
            passengerIdNumber: `00${Math.floor(Math.random() * 1000000000)}`,
            carriageNumber: 1 + (i % 3),
            seatNumber: seatNumbers[i % seatNumbers.length],
            ticketType: i === count - 1 && count > 1 ? 'Trẻ em' : 'Người lớn',
            price: i === count - 1 && count > 1 ? basePrice * 0.5 : basePrice,
            qrCode: `QR-${orderId}-${i + 1}`,
        });
    }

    return tickets;
}

// Mock order data
export const initialOrderData: Order[] = [
    {
        id: 'order-1',
        orderCode: 'DH2025001',
        customer: mockCustomers[0],
        trainId: 'train-1',
        trainCode: 'SE1',
        trainName: 'Thống Nhất SE1',
        departureTime: '2025-12-25T19:30:00',
        tickets: generateTickets('order-1', 'train-1', 2),
        totalAmount: 1700000,
        paymentMethod: 'Thẻ tín dụng',
        paymentStatus: 'Đã thanh toán',
        orderStatus: 'Chờ xử lý',
        createdAt: '2025-12-14T10:30:00',
    },
    {
        id: 'order-2',
        orderCode: 'DH2025002',
        customer: mockCustomers[1],
        trainId: 'train-2',
        trainCode: 'SE3',
        trainName: 'Thống Nhất SE3',
        departureTime: '2025-12-26T07:00:00',
        tickets: generateTickets('order-2', 'train-2', 1),
        totalAmount: 600000,
        paymentMethod: 'Chuyển khoản',
        paymentStatus: 'Đã thanh toán',
        orderStatus: 'Đã xác nhận',
        createdAt: '2025-12-13T14:20:00',
        confirmedAt: '2025-12-13T15:00:00',
    },
    {
        id: 'order-3',
        orderCode: 'DH2025003',
        customer: mockCustomers[2],
        trainId: 'train-3',
        trainCode: 'SE5',
        trainName: 'Thống Nhất SE5',
        departureTime: '2025-12-27T14:00:00',
        tickets: generateTickets('order-3', 'train-3', 3),
        totalAmount: 2125000,
        paymentMethod: 'Ví điện tử',
        paymentStatus: 'Đã thanh toán',
        orderStatus: 'Hoàn thành',
        createdAt: '2025-12-12T09:15:00',
        confirmedAt: '2025-12-12T10:00:00',
    },
    {
        id: 'order-4',
        orderCode: 'DH2025004',
        customer: mockCustomers[3],
        trainId: 'train-1',
        trainCode: 'SE1',
        trainName: 'Thống Nhất SE1',
        departureTime: '2025-12-25T19:30:00',
        tickets: generateTickets('order-4', 'train-1', 4),
        totalAmount: 3250000,
        paymentMethod: 'Thẻ tín dụng',
        paymentStatus: 'Chưa thanh toán',
        orderStatus: 'Chờ xử lý',
        createdAt: '2025-12-14T11:00:00',
    },
    {
        id: 'order-5',
        orderCode: 'DH2025005',
        customer: mockCustomers[4],
        trainId: 'train-5',
        trainCode: 'SE9',
        trainName: 'Thống Nhất SE9',
        departureTime: '2025-12-29T08:00:00',
        tickets: generateTickets('order-5', 'train-5', 2),
        totalAmount: 560000,
        paymentMethod: 'Chuyển khoản',
        paymentStatus: 'Hoàn tiền',
        orderStatus: 'Đã hủy',
        createdAt: '2025-12-13T16:30:00',
        cancelledAt: '2025-12-14T09:00:00',
        cancelReason: 'Khách hàng yêu cầu hủy do thay đổi kế hoạch',
    },
    {
        id: 'order-6',
        orderCode: 'DH2025006',
        customer: mockCustomers[0],
        trainId: 'train-6',
        trainCode: 'SP1',
        trainName: 'Sapaly SP1',
        departureTime: '2025-12-30T21:00:00',
        tickets: generateTickets('order-6', 'train-6', 2),
        totalAmount: 1000000,
        paymentMethod: 'Ví điện tử',
        paymentStatus: 'Đã thanh toán',
        orderStatus: 'Đã xác nhận',
        createdAt: '2025-12-11T08:45:00',
        confirmedAt: '2025-12-11T09:30:00',
    },
    {
        id: 'order-7',
        orderCode: 'DH2025007',
        customer: mockCustomers[1],
        trainId: 'train-4',
        trainCode: 'SE7',
        trainName: 'Thống Nhất SE7',
        departureTime: '2025-12-28T06:00:00',
        tickets: generateTickets('order-7', 'train-4', 1),
        totalAmount: 350000,
        paymentMethod: 'Tiền mặt',
        paymentStatus: 'Đã thanh toán',
        orderStatus: 'Chờ xử lý',
        createdAt: '2025-12-14T12:00:00',
    },
    {
        id: 'order-8',
        orderCode: 'DH2025008',
        customer: mockCustomers[2],
        trainId: 'train-10',
        trainCode: 'SE13',
        trainName: 'Thống Nhất SE13',
        departureTime: '2025-12-25T20:00:00',
        tickets: generateTickets('order-8', 'train-10', 5),
        totalAmount: 2900000,
        paymentMethod: 'Thẻ tín dụng',
        paymentStatus: 'Đã thanh toán',
        orderStatus: 'Đã xác nhận',
        createdAt: '2025-12-10T15:20:00',
        confirmedAt: '2025-12-10T16:00:00',
    },
    {
        id: 'order-9',
        orderCode: 'DH2025009',
        customer: mockCustomers[3],
        trainId: 'train-2',
        trainCode: 'SE3',
        trainName: 'Thống Nhất SE3',
        departureTime: '2025-12-26T07:00:00',
        tickets: generateTickets('order-9', 'train-2', 3),
        totalAmount: 1800000,
        paymentMethod: 'Chuyển khoản',
        paymentStatus: 'Chưa thanh toán',
        orderStatus: 'Chờ xử lý',
        createdAt: '2025-12-14T13:10:00',
    },
    {
        id: 'order-10',
        orderCode: 'DH2025010',
        customer: mockCustomers[4],
        trainId: 'train-7',
        trainCode: 'SQN2',
        trainName: 'Tàu Quảng Ninh SQN2',
        departureTime: '2025-12-26T09:00:00',
        tickets: generateTickets('order-10', 'train-7', 2),
        totalAmount: 560000,
        paymentMethod: 'Ví điện tử',
        paymentStatus: 'Đã thanh toán',
        orderStatus: 'Hoàn thành',
        createdAt: '2025-12-09T10:00:00',
        confirmedAt: '2025-12-09T11:00:00',
    },
];
